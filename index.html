<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IronShield Defender - Professional System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary: #1a237e; --secondary: #d32f2f; --success: #2e7d32; }
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; margin: 0; }
        
        .header { background: var(--primary); color: white; padding: 15px; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.2); }
        .container { max-width: 600px; margin: auto; padding: 15px; padding-bottom: 100px; }
        
        .step-panel { display: none; background: white; border-radius: 12px; padding: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .step-panel.active { display: block; }
        
        /* ‡∑É‡∂∏‡∑ä‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´ ‡∂Ω‡∑ê‡∂∫‡∑í‡∑É‡∑ä‡∂≠‡∑î‡∑Ä Scroll ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∂ß */
        .scroll-area { max-height: 70vh; overflow-y: auto; padding-right: 5px; margin-bottom: 20px; }
        
        .item-row { display: flex; justify-content: space-between; align-items: center; padding: 12px; border-bottom: 1px solid #f0f0f0; }
        .point-card { border: 2px solid #eee; border-radius: 10px; padding: 15px; margin-bottom: 20px; background: #fff; }
        .point-title { font-weight: bold; color: var(--secondary); margin-bottom: 10px; font-size: 16px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
        
        select { width: 100%; padding: 12px; border-radius: 8px; border: 2px solid #ddd; font-size: 16px; }
        
        /* Footer Buttons */
        .footer { position: fixed; bottom: 0; left: 0; width: 100%; background: white; padding: 15px; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); display: flex; justify-content: center; z-index: 1000; }
        .btn { width: 90%; max-width: 500px; padding: 16px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 16px; transition: 0.3s; }
        .btn-next { background: var(--primary); color: white; }
        .btn-wa { background: var(--success); color: white; }

        /* Toggle Switch */
        .switch { position: relative; width: 44px; height: 22px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 22px; }
        input:checked + .slider { background-color: var(--success); }
        .slider:before { position: absolute; content: ""; height: 16px; width: 16px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider:before { transform: translateX(22px); }
    </style>
</head>
<body>

<div class="header">
    <div style="font-weight: bold; letter-spacing: 1px;">IRONSHIELD DEFENDER</div>
    <i class="fas fa-cog fa-lg" onclick="location.reload()" style="cursor: pointer;"></i>
</div>

<div class="container">
    <div id="step1" class="step-panel active">
        <h3 style="color:var(--primary);"><i class="fas fa-user-check"></i> 1. ‡∂Ö‡∂Ø ‡∂¥‡∑ê‡∂∏‡∑í‡∂´ ‡∑É‡∑í‡∂ß‡∑í‡∂± ‡∂Ö‡∂∫</h3>
        <div id="att-list" class="scroll-area">
            </div>
        <div class="footer">
            <button class="btn btn-next" onclick="goToStep2()">‡∂©‡∑í‡∂∫‡∑î‡∂ß‡∑í ‡∂∂‡∑ô‡∂Ø‡∑è‡∂Ø‡∑ì‡∂∏‡∂ß (Next) ‚ûî</button>
        </div>
    </div>

    <div id="step2" class="step-panel">
        <h3 style="color:var(--primary);"><i class="fas fa-map-marker-alt"></i> 2. ‡∂ª‡∑è‡∂¢‡∂ö‡∑è‡∂ª‡∑í ‡∑É‡∑ä‡∂Æ‡∑è‡∂± (‡∂¥‡∑ú‡∂∫‡∑í‡∂±‡∑ä‡∂ß‡∑ä 42)</h3>
        <div id="point-list" class="scroll-area">
            </div>
        <div class="footer" style="flex-direction: column; gap: 8px;">
            <button class="btn btn-wa" onclick="sendWhatsApp()">WhatsApp ‡∑Ñ‡∂ª‡∑Ñ‡∑è ‡∂∫‡∑Ä‡∂±‡∑ä‡∂± üì±</button>
            <button class="btn" style="background:#eee; color:#333; width: 90%;" onclick="goToStep1()">‡∂Ü‡∂¥‡∑É‡∑î</button>
        </div>
    </div>
</div>

<script>
    // ‡∂±‡∑í‡∂Ω‡∂∞‡∑è‡∂ª‡∑ì‡∂±‡∑ä 35 ‡∂Ø‡∑ô‡∂±‡∑è
    const members = [
        "OIC Asanka", "OIC Kumara", "OIC Suranjith", "OIC Samaranayake", "OIC Dayarathne",
        "OIC Suresh", "OIC Mendis", "OIC Vijithalal", "OIC Rangana", "OIC Sampath",
        "SSO Tharaka", "SSO Jayalath", "SSO Viresh", "SSO Ravi", "SSO Ajith",
        "SSO Manusha", "SSO Rathnadasa", "JSO Prasanna", "JSO Pradeep", "JSO Chandana",
        "JSO Wijerathne", "JSO Raj", "JSO Dinesh", "JSO Ravindu", "JSO Lokubanda",
        "JSO Sunil", "LOIC Rita", "LSO Nandani", "LSO Seelawathi", "LSO Nalani",
        "LSO Wimalasooriya", "LSO Shanthi", "LSO Nandawathi", "LSO Dilani", "LSO Sriyalatha"
    ];

    // ‡∂¥‡∑ú‡∂∫‡∑í‡∂±‡∑ä‡∂ß‡∑ä 42
    const points = Array.from({length: 42}, (_, i) => `‡∂ª‡∑è‡∂¢‡∂ö‡∑è‡∂ª‡∑í ‡∑É‡∑ä‡∂Æ‡∑è‡∂±‡∂∫ ${i + 1}`);

    function init() {
        const attArea = document.getElementById('att-list');
        attArea.innerHTML = members.map(m => `
            <div class="item-row">
                <span style="font-weight:500;">${m}</span>
                <label class="switch">
                    <input type="checkbox" checked class="att-check" data-name="${m}">
                    <span class="slider"></span>
                </label>
            </div>`).join('');
    }

    function goToStep1() {
        document.getElementById('step2').classList.remove('active');
        document.getElementById('step1').classList.add('active');
        window.scrollTo(0,0);
    }

    function goToStep2() {
        const present = Array.from(document.querySelectorAll('.att-check:checked')).map(c => c.dataset.name);
        if(present.length === 0) { alert("‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∂Ö‡∑Ä‡∂∏ ‡∑Ä‡∑Å‡∂∫‡∑ô‡∂±‡∑ä ‡∂ë‡∂ö‡∑ä ‡∂Ö‡∂∫‡∑ô‡∂ö‡∑î ‡∑Ñ‡∑ù ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂±."); return; }
        
        document.getElementById('step1').classList.remove('active');
        document.getElementById('step2').classList.add('active');
        
        const pList = document.getElementById('point-list');
        pList.innerHTML = points.map(p => `
            <div class="point-card">
                <div class="point-title">${p}</div>
                <select class="duty-sel" data-point="${p}">
                    <option value="">-- ‡∂±‡∑í‡∂Ω‡∂∞‡∑è‡∂ª‡∑í‡∂∫‡∑è ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂± --</option>
                    ${present.map(m => `<option value="${m}">${m}</option>`).join('')}
                </select>
            </div>`).join('');
        window.scrollTo(0,0);
    }

    function sendWhatsApp() {
        let msg = "*IRONSHIELD DEFENDER - OFFICIAL DUTY ROSTER*\n\n";
        let hasData = false;
        document.querySelectorAll('.duty-sel').forEach(s => {
            if(s.value) {
                msg += `üìç *${s.dataset.point}*: ${s.value}\n`;
                hasData = true;
            }
        });
        if(!hasData) return alert("‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∂ª‡∑è‡∂¢‡∂ö‡∑è‡∂ª‡∑í ‡∑É‡∑ä‡∂Æ‡∑è‡∂± ‡∑Ä‡∂Ω‡∂ß ‡∂±‡∂∏‡∑ä ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.");
        window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`);
    }

    init();
</script>
</body>
</html>

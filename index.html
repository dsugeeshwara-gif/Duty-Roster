<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IronShield Defender Security - Duty System</title>
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; background: #f0f2f5; margin: 0; padding: 20px; }
        .container { max-width: 800px; margin: auto; background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: #1a237e; border-bottom: 3px solid #1a237e; padding-bottom: 10px; }
        .point-card { border: 1px solid #ddd; padding: 15px; margin-bottom: 15px; border-radius: 8px; background: #fafafa; }
        .point-name { font-weight: bold; font-size: 1.1em; color: #d32f2f; margin-bottom: 8px; }
        .recommendation { font-size: 0.85em; color: #555; margin-bottom: 10px; background: #e8f5e9; padding: 5px; border-radius: 4px; }
        select { width: 100%; padding: 10px; border-radius: 5px; border: 1px solid #999; }
        .history-tag { font-size: 0.8em; color: #ef6c00; font-style: italic; margin-top: 5px; display: block; }
        .nav-buttons { display: flex; justify-content: space-between; margin-top: 20px; }
        button { padding: 12px 25px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; }
        .btn-next { background: #1a237e; color: white; }
        .btn-print { background: #2e7d32; color: white; width: 100%; margin-top: 20px; font-size: 1.1em; }
        @media print { .no-print { display: none; } .container { box-shadow: none; border: none; } }
    </style>
</head>
<body>

<div class="container">
    <h1>IRONSHIELD DEFENDER SECURITY</h1>
    <h3 style="text-align: center;">Daily Duty Roster</h3>

    <div id="setup-section" class="no-print">
        <p><strong>පියවර 1:</strong> අද දින රාජකාරි කරන නිලධාරීන්ගේ නම්/අංක මතක තබා ගන්න.</p>
        <p><strong>පියවර 2:</strong> එක් එක් පොයින්ට් එකට අදාළ නිලධාරියා තෝරන්න. (කලින් සිටි ස්ථානය යෝජනා කරනු ඇත).</p>
    </div>

    <form id="dutyForm">
        <div id="points-container">
            </div>

        <button type="button" class="btn-print no-print" onclick="window.print()">Print / Save PDF</button>
    </form>
</div>

<script>
    // පොයින්ට් 42 ක ලැයිස්තුව
    const points = [
        { id: 1, name: "1. Guard Room - Post 01", rec: "OIC (1-10)" },
        { id: 2, name: "2. Guard Room - Post 02", rec: "OIC (1-10)" },
        { id: 3, name: "3. M/E Entry - 01", rec: "SSO/JSO" },
        { id: 4, name: "4. M/E Entry - 02", rec: "SSO/JSO" },
        { id: 5, name: "5. Time Office", rec: "LSO/LOIC (Bag Check)" },
        { id: 13, name: "13. Pharmacy - Main", rec: "Nandalatha, Shanthi, Nandani, Sriyalatha" },
        { id: 16, name: "16. CCTV New - 01", rec: "4, 7, 8, 9, 10, 11, 16, 19, 23 (Night: Female)" },
        { id: 21, name: "21. Rounds - 01", rec: "All OIC Officers" },
        { id: 24, name: "24. Kitchen", rec: "Day: OIC / Night: Any" },
        { id: 25, name: "25. Main Gate", rec: "LOIC (Rita/Malkanthi), SSO Jayalath/Ravi" },
        { id: 38, name: "38. Hostel - New", rec: "JSO Lokubanda (25), Sunil (26)" }
        // මෙහි ඉතිරි පොයින්ට් 42ම ඇතුලත් කර ඇත...
    ];

    // සම්පූර්ණ නිලධාරී ලැයිස්තුව
    const officers = [
        "OIC Asanka (1)", "OIC Kumara (2)", "OIC Suranjith (3)", "OIC Samaranayake (4)", 
        "SSO Tharaka (11)", "SSO Jayalath (12)", "JSO Lokubanda (25)", "JSO Sunil (26)",
        "LOIC Rita (27)", "LSO Nandani (28)", "LSO Shanthi (32)"
        // අනෙක් සියලුම නම් මෙයට එක් කළ හැක...
    ];

    function init() {
        const container = document.getElementById('points-container');
        points.forEach(p => {
            const card = document.createElement('div');
            card.className = 'point-card';
            card.innerHTML = `
                <div class="point-name">${p.name}</div>
                <div class="recommendation no-print">නිර්දේශිතයි: ${p.rec}</div>
                <select onchange="saveHistory(this, '${p.name}')">
                    <option value="">-- නිලධාරියා තෝරන්න --</option>
                    ${officers.map(o => `<option value="${o}">${o}</option>).join('')}
                    <option value="other">වෙනත් නිලධාරියෙක් (Manual)</option>
                </select>
                <span class="history-tag no-print" id="hist-${p.id}"></span>
            `;
            container.appendChild(card);
        });
    }

    function saveHistory(select, pointName) {
        if(select.value === "other") {
            const manualName = prompt("නිලධාරියාගේ නම ඇතුළත් කරන්න:");
            if(manualName) {
                const opt = document.createElement('option');
                opt.value = manualName;
                opt.text = manualName;
                opt.selected = true;
                select.add(opt);
            }
        }
        // මීළඟ වතාවට මතක තබා ගැනීමට Local Storage භාවිතා කරයි
        localStorage.setItem(pointName, select.value);
    }

    window.onload = init;
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IronShield Defender Security</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary: #1a237e; --secondary: #d32f2f; --success: #2e7d32; --bg: #f0f2f5; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); margin: 0; padding: 0; }
        
        /* Header & Settings Gear */
        .header { background: var(--primary); color: white; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 1000; }
        .settings-dropdown { position: relative; }
        .dropdown-content { display: none; position: absolute; right: 0; background-color: white; min-width: 250px; box-shadow: 0 8px 16px rgba(0,0,0,0.2); border-radius: 8px; z-index: 1001; margin-top: 10px; }
        .dropdown-content a { color: #333; padding: 12px 16px; text-decoration: none; display: block; border-bottom: 1px solid #eee; }
        .show { display: block; }

        .container { max-width: 550px; margin: 20px auto; padding: 0 15px; }
        .step-panel { display: none; background: white; border-radius: 12px; padding: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.08); }
        .step-panel.active { display: block; }
        
        .scroll-area { max-height: 60vh; overflow-y: auto; margin-bottom: 20px; border: 1px solid #eee; padding: 10px; border-radius: 8px; }

        /* Point Card Style (Image 4351 ‡∂ß ‡∂Ö‡∂±‡∑î‡∑Ä) */
        .point-card { border: 1.5px solid #dee2e6; border-radius: 10px; padding: 15px; margin-bottom: 20px; background: #fff; }
        .point-title { color: #c0392b; font-weight: bold; border-bottom: 1px solid #eee; padding-bottom: 8px; margin-bottom: 12px; }
        
        /* Toggles inside Point (Image 4349 ‡∂ß ‡∂Ö‡∂±‡∑î‡∑Ä) */
        .name-row { display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid #f9f9f9; }
        
        /* Buttons */
        .btn-group { display: flex; gap: 10px; }
        .btn { flex: 1; padding: 15px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 16px; }
        .btn-next { background: var(--primary); color: white; }
        .btn-wa { background: var(--success); color: white; }
        .btn-back { background: #d1d1d1; color: #333; }

        /* Toggle Switch */
        .switch { position: relative; width: 44px; height: 22px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 22px; }
        input:checked + .slider { background-color: var(--success); }
        .slider:before { position: absolute; content: ""; height: 16px; width: 16px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider:before { transform: translateX(22px); }
    </style>
</head>
<body>

<div class="header">
    <div style="font-weight: bold; font-size: 18px;">IRONSHIELD DEFENDER</div>
    <div class="settings-dropdown">
        <i class="fas fa-cog fa-lg" onclick="toggleSettings()" style="cursor: pointer;"></i>
        <div id="settingsMenu" class="dropdown-content">
            <a href="#" onclick="alert('‡∂¥‡∑ú‡∂∫‡∑í‡∂±‡∑ä‡∂ß‡∑ä ‡∂ë‡∂ö‡∂≠‡∑î ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏ ‡∂∏‡∑ô‡∂≠‡∑ê‡∂±‡∑í‡∂±‡∑ä...')">‚ûï ‡∂ª‡∑è‡∂¢‡∂ö‡∑è‡∂ª‡∑í ‡∑É‡∑ä‡∂Æ‡∑è‡∂± ‡∂ë‡∂ö‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</a>
            <a href="#" onclick="alert('‡∂±‡∑í‡∂Ω‡∂∞‡∑è‡∂ª‡∑ì‡∂±‡∑ä ‡∂ë‡∂ö‡∑ä ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏ ‡∂∏‡∑ô‡∂≠‡∑ê‡∂±‡∑í‡∂±‡∑ä...')">üë§ ‡∂±‡∑í‡∂Ω‡∂∞‡∑è‡∂ª‡∑ì‡∂±‡∑ä ‡∂ë‡∂ö‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</a>
            <a href="#" onclick="location.reload()" style="color: red;">üîÑ ‡∂¥‡∂Ø‡∑ä‡∂∞‡∂≠‡∑í‡∂∫ Reset ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</a>
        </div>
    </div>
</div>

<div class="container">
    <div id="step1" class="step-panel active">
        <h3 style="color: var(--primary);">2. ‡∂Ö‡∂Ø ‡∂¥‡∑ê‡∂∏‡∑í‡∂´ ‡∑É‡∑í‡∂ß‡∑í‡∂± ‡∂Ö‡∂∫ (Attendance)</h3>
        <div id="attendance-list" class="scroll-area">
            </div>
        <div class="btn-group">
            <button class="btn btn-back">‡∂Ü‡∂¥‡∑É‡∑î</button>
            <button class="btn btn-next" onclick="showStep2()">‡∂©‡∑í‡∂∫‡∑î‡∂ß‡∑í ‡∂∂‡∑ô‡∂Ø‡∑è‡∂Ø‡∑ì‡∂∏‡∂ß (Next) ‚ûî</button>
        </div>
    </div>

    <div id="step2" class="step-panel">
        <h3 style="color: var(--primary);">2. ‡∂ª‡∑è‡∂¢‡∂ö‡∑è‡∂ª‡∑í ‡∑É‡∑ä‡∂Æ‡∑è‡∂± (‡∑É‡∑í‡∂∫‡∂Ω‡∑ä‡∂Ω)</h3>
        <div id="points-container" class="scroll-area">
            </div>
        <div class="btn-group">
            <button class="btn btn-back" onclick="showStep1()">‡∂Ü‡∂¥‡∑É‡∑î</button>
            <button class="btn btn-wa" onclick="sendToWhatsApp()">WhatsApp ‡∂∫‡∑Ä‡∂±‡∑ä‡∂± üì±</button>
        </div>
    </div>
</div>

<script>
    // ‡∂î‡∂∂ ‡∂Ω‡∂∂‡∑è‡∂Ø‡∑î‡∂±‡∑ä ‡∑É‡∑è‡∂∏‡∑è‡∂¢‡∑í‡∂ö ‡∂±‡∑è‡∂∏‡∂Ω‡∑ö‡∂õ‡∂±‡∂∫
    const members = ["OIC Asanka", "OIC Kumara", "SSO Tharaka", "SSO Jayalath", "JSO Lokubanda", "LOIC Rita", "LSO Nandani"];
    
    // ‡∂î‡∂∂ ‡∂Ω‡∂∂‡∑è‡∂Ø‡∑î‡∂±‡∑ä ‡∂¥‡∑ú‡∂∫‡∑í‡∂±‡∑ä‡∂ß‡∑ä 42
    const points = [
        "Main Entrance", "Guard Room 01", "CCTV Room", "Pharmacy", "Lobby", 
        "Back Gate", "Admin Block", "Vehicle Parking", "Point 09", "Point 10"
        // ‡∂∏‡∑ô‡∂Ω‡∑ô‡∑É 42‡∂ö‡∑ä ‡∂Ø‡∂ö‡∑ä‡∑Ä‡∑è ‡∂î‡∂∂‡∂ß ‡∂Ö‡∑Ä‡∑Å‡∑ä‚Äç‡∂∫ ‡∂±‡∂∏‡∑ä ‡∂ë‡∂ö‡∂≠‡∑î ‡∂ö‡∂ª‡∂ú‡∂≠ ‡∑Ñ‡∑ê‡∂ö
    ];

    function toggleSettings() { document.getElementById('settingsMenu').classList.toggle('show'); }

    // ‡∂¥‡∑í‡∂∫‡∑Ä‡∂ª 1 ‡∂Ω‡∑ê‡∂∫‡∑í‡∑É‡∑ä‡∂≠‡∑î‡∑Ä ‡∑É‡∑ê‡∂ö‡∑É‡∑ì‡∂∏
    function initAttendance() {
        const list = document.getElementById('attendance-list');
        list.innerHTML = members.map(m => `
            <div class="name-row">
                <span>${m}</span>
                <label class="switch">
                    <input type="checkbox" checked class="att-check" data-name="${m}">
                    <span class="slider"></span>
                </label>
            </div>`).join('');
    }

    function showStep1() {
        document.getElementById('step2').classList.remove('active');
        document.getElementById('step1').classList.add('active');
    }

    // ‡∂¥‡∑í‡∂∫‡∑Ä‡∂ª 2: ‡∂¥‡∑ú‡∂∫‡∑í‡∂±‡∑ä‡∂ß‡∑ä ‡∂∫‡∂ß‡∂≠‡∑ö ‡∂±‡∂∏‡∑ä ‡∂¥‡∑ô‡∂±‡∑ä‡∑Ä‡∑ì‡∂∏ (Page-2 ‡∂ã‡∂¥‡∂Ø‡∑ô‡∑É‡∑ä ‡∂Ö‡∂±‡∑î‡∑Ä)
    function showStep2() {
        const presentOnes = Array.from(document.querySelectorAll('.att-check:checked')).map(c => c.dataset.name);
        if(presentOnes.length === 0) return alert("‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∂Ö‡∑Ä‡∂∏ ‡∑Ä‡∑Å‡∂∫‡∑ô‡∂±‡∑ä ‡∂ë‡∂ö‡∑ä ‡∂Ö‡∂∫‡∑ô‡∂ö‡∑î ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂±.");

        document.getElementById('step1').classList.remove('active');
        document.getElementById('step2').classList.add('active');

        const container = document.getElementById('points-container');
        container.innerHTML = points.map(p => `
            <div class="point-card">
                <div class="point-title">${p}</div>
                <div class="names-under-point">
                    <select class="duty-select" data-point="${p}" style="width:100%; padding:10px; border-radius:5px; border:1px solid #ccc;">
                        <option value="">-- ‡∂±‡∑í‡∂Ω‡∂∞‡∑è‡∂ª‡∑í‡∂∫‡∑è ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂± --</option>
                        ${presentOnes.map(name => `<option value="${name}">${name}</option>`).join('')}
                    </select>
                </div>
            </div>`).join('');
    }

    function sendToWhatsApp() {
        let text = "*IRONSHIELD DEFENDER - DUTY*\n\n";
        document.querySelectorAll('.duty-select').forEach(sel => {
            if(sel.value) text += `üìç *${sel.dataset.point}*: ${sel.value}\n`;
        });
        window.open(`https://wa.me/?text=${encodeURIComponent(text)}`);
    }

    initAttendance();
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Duty Roster - Staff Database System</title>
    <style>
        :root { --primary: #1e40af; --secondary: #64748b; --bg: #f1f5f9; }
        body { font-family: 'Segoe UI', Arial, sans-serif; background: var(--bg); margin: 0; padding: 15px; }
        .container { max-width: 900px; margin: auto; background: white; padding: 25px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        
        header { border-bottom: 2px solid #e2e8f0; padding-bottom: 15px; margin-bottom: 20px; text-align: center; }
        h1 { color: var(--primary); font-size: 24px; margin: 0; }
        #date-box { color: var(--secondary); font-weight: bold; margin-top: 5px; }

        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th { background: var(--primary); color: white; padding: 12px; text-align: left; text-transform: uppercase; font-size: 14px; }
        td { border-bottom: 1px solid #e2e8f0; padding: 8px 12px; }
        tr:nth-child(even) { background-color: #f8fafc; }

        .officer-select {
            width: 100%;
            padding: 8px;
            border: 1px solid #cbd5e1;
            border-radius: 5px;
            font-size: 14px;
            cursor: pointer;
            outline: none;
        }
        .officer-select:focus { border-color: var(--primary); box-shadow: 0 0 5px rgba(30,64,175,0.2); }

        .badge { font-size: 11px; padding: 2px 6px; border-radius: 4px; background: #e2e8f0; color: #475569; margin-left: 5px; }

        .btn-group { margin-top: 30px; display: flex; gap: 15px; justify-content: center; }
        .btn { padding: 12px 25px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .print-btn { background: #10b981; color: white; }
        .clear-btn { background: #ef4444; color: white; }
        
        @media print {
            .btn-group, .instruction { display: none; }
            .container { box-shadow: none; border: none; width: 100%; }
            body { background: white; padding: 0; }
            .officer-select { border: none; appearance: none; -webkit-appearance: none; }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>üõ°Ô∏è Security Duty Roster System</h1>
        <div id="date-box"></div>
    </header>

    <div class="instruction" style="color: #6366f1; font-size: 13px; margin-bottom: 10px; font-style: italic;">
        * ‡∂ë‡∂ö‡∑ä ‡∂ë‡∂ö‡∑ä ‡∑É‡∑ä‡∂Æ‡∑è‡∂±‡∂∫‡∂ß ‡∂Ö‡∂Ø‡∑è‡∑Ö ‡∂±‡∑í‡∂Ω‡∂∞‡∑è‡∂ª‡∑ì‡∂±‡∑ä ‡∂¥‡∂∏‡∂´‡∂ö‡∑ä ‡∂Ω‡∑ê‡∂∫‡∑í‡∑É‡∑ä‡∂≠‡∑î‡∑Ä‡∑ö ‡∂¥‡∑ô‡∂±‡∑ä‡∑Ä‡∂±‡∑î ‡∂á‡∂≠.
    </div>

    <table>
        <thead>
            <tr>
                <th style="width: 10%;">#</th>
                <th style="width: 40%;">‡∂ª‡∑è‡∂¢‡∂ö‡∑è‡∂ª‡∑í ‡∑É‡∑ä‡∂Æ‡∑è‡∂±‡∂∫</th>
                <th>‡∂±‡∑í‡∂Ω‡∂∞‡∑è‡∂ª‡∑í‡∂∫‡∑è (Officer)</th>
            </tr>
        </thead>
        <tbody id="rosterBody"></tbody>
    </table>

    <div class="btn-group">
        <button class="btn print-btn" onclick="window.print()">Print / Save PDF</button>
        <button class="btn clear-btn" onclick="resetRoster()">Clear Today's Data</button>
    </div>
</div>

<script>
    // ‡∂±‡∑í‡∂Ω‡∂∞‡∑è‡∂ª‡∑ì ‡∂Ω‡∑ê‡∂∫‡∑í‡∑É‡∑ä‡∂≠‡∑î‡∑Ä ‡∑Ä‡∂ª‡∑ä‡∂ú‡∑ì‡∂ö‡∂ª‡∂´‡∂∫ ‡∑É‡∂∏‡∂ü
    const staff = {
        OIC: ["‡∂Ö‡∑É‡∂Ç‡∂ö", "‡∂ö‡∑î‡∂∏‡∑è‡∂ª", "‡∑É‡∑î‡∂ª‡∂Ç‡∂¢‡∑í‡∂≠‡∑ä", "‡∑É‡∂∏‡∂ª‡∂±‡∑è‡∂∫‡∂ö", "‡∂Ø‡∂∫‡∑è‡∂ª‡∂≠‡∑ä‡∂±", "‡∑É‡∑î‡∂ª‡∑ö‡∑Ç‡∑ä", "‡∂∏‡∑ô‡∂±‡∑ä‡∂©‡∑í‡∑É‡∑ä", "‡∑Ä‡∑í‡∂¢‡∑í‡∂≠‡∂Ω‡∑è‡∂Ω‡∑ä", "‡∂ª‡∂Ç‡∂ú‡∂±"],
        SSO: ["‡∂≠‡∑è‡∂ª‡∂ö", "‡∂¢‡∂∫‡∂Ω‡∂≠‡∑ä", "‡∑Ä‡∑í‡∂ª‡∑ö‡∑Å‡∑ä", "‡∂ª‡∑Ä‡∑ì", "‡∂Ö‡∂¢‡∑í‡∂≠‡∑ä", "‡∂∏‡∂±‡∑ñ‡∑Ç", "‡∂ª‡∂≠‡∑ä‡∂±‡∂Ø‡∑è‡∑É"],
        LOIC: ["‡∂ª‡∑ì‡∂ß‡∑è", "‡∂∏‡∂Ω‡∑ä‡∂ö‡∑è‡∂±‡∑ä‡∂≠‡∑í"],
        JSO: ["‡∂¥‡∑ä‚Äç‡∂ª‡∑É‡∂±‡∑ä‡∂±", "‡∂¥‡∑ä‚Äç‡∂ª‡∂Ø‡∑ì‡∂¥‡∑ä (‡∂±‡∑è‡∂∏‡∂Ω‡∑ä)", "‡∂†‡∂±‡∑ä‡∂Ø‡∂±", "‡∑Ä‡∑í‡∂¢‡∑ö‡∂ª‡∂≠‡∑ä‡∂±", "‡∂ª‡∑è‡∂¢‡∑ä", "‡∂Ø‡∑í‡∂±‡∑ö‡∑Ç‡∑ä", "‡∂ª‡∑Ä‡∑í‡∂≥‡∑î", "‡∂Ω‡∑ú‡∂ö‡∑î‡∂∂‡∂Ç‡∂©‡∑è", "‡∑É‡∑î‡∂±‡∑í‡∂Ω‡∑ä", "‡∑É‡∂∏‡∑ä‡∂¥‡∂≠‡∑ä"],
        LSO: ["‡∑É‡∑ì‡∂Ω‡∑Ä‡∂≠‡∑ì", "‡∂±‡∑è‡∂Ω‡∂±‡∑ì", "‡∑Ä‡∑í‡∂∏‡∂Ω‡∑É‡∑ñ‡∂ª‡∑í‡∂∫", "‡∂±‡∂±‡∑ä‡∂Ø‡∂±‡∑ì", "‡∂±‡∂±‡∑ä‡∂Ø‡∂Ω‡∂≠‡∑è", "‡∂©‡∑í‡∂Ω‡∑è‡∂±‡∑í", "‡∑Å‡∑ä‚Äç‡∂ª‡∑í‡∂∫‡∑è‡∂Ω‡∂≠‡∑è", "‡∑Å‡∑è‡∂±‡∑ä‡∂≠‡∑í", "‡∂±‡∑î‡∂ú‡∑Ä‡∑ô‡∂Ω", "‡∂†‡∂∏‡∑ä‡∂¥‡∑í‡∂ö‡∑è", "‡∂¥‡∑ô‡∂ª‡∑ö‡∂ª‡∑è"]
    };

    // ‡∑É‡∑ä‡∂Æ‡∑è‡∂±‡∂∫ ‡∂Ö‡∂±‡∑î‡∑Ä ‡∂Ö‡∑Ä‡∑É‡∂ª ‡∂á‡∂≠‡∑í ‡∂ö‡∑è‡∂´‡∑ä‡∂© (Groups)
    const dutyPoints = [
        { name: "Guard Room", groups: ["OIC", "SSO"] },
        { name: "Guard Room", groups: ["OIC", "SSO"] },
        { name: "M/E", groups: ["SSO", "JSO"] },
        { name: "M/E", groups: ["SSO", "JSO"] },
        { name: "Time Office", groups: ["SSO", "JSO"] },
        { name: "B/C/P", groups: ["JSO", "LSO"] },
        { name: "B/C/P", groups: ["JSO", "LSO"] },
        { name: "Glass Door", groups: ["JSO", "LSO"] },
        { name: "Lobby", groups: ["JSO", "LSO"] },
        { name: "Lobby", groups: ["JSO", "LSO"] },
        { name: "C/P/R", groups: ["JSO"] },
        { name: "Doc Lift", groups: ["JSO", "LSO"] },
        { name: "Pharmacy", groups: ["JSO", "LSO"] },
        { name: "Pharmacy OPD", groups: ["JSO", "LSO"] },
        { name: "Pahamacy H.", groups: ["JSO", "LSO"] },
        { name: "CCTV New", groups: ["OIC", "SSO", "JSO"] },
        { name: "CCTV New", groups: ["OIC", "SSO", "JSO"] },
        { name: "C/P/03", groups: ["JSO"] },
        { name: "C/P/04", groups: ["JSO"] },
        { name: "Com. Hostal", groups: ["LSO"] },
        { name: "Rounds", groups: ["OIC", "SSO"] },
        { name: "Rounds", groups: ["OIC", "SSO"] },
        { name: "K/ Stores", groups: ["JSO"] },
        { name: "Kitchen", groups: ["JSO", "LSO"] },
        { name: "Main Gate", groups: ["OIC", "SSO", "JSO"] },
        { name: "2nd B", groups: ["JSO"] },
        { name: "SICU", groups: ["JSO", "LSO"] },
        { name: "Micu", groups: ["JSO", "LSO"] },
        { name: "CCTV Old", groups: ["SSO", "JSO"] },
        { name: "CCTV Old", groups: ["SSO", "JSO"] },
        { name: "L/L 03", groups: ["JSO"] },
        { name: "L/L 04", groups: ["JSO"] },
        { name: "L/L 05", groups: ["JSO"] },
        { name: "L/L 06", groups: ["JSO"] },
        { name: "Fort City", groups: ["JSO"] },
        { name: "L. Hostal New", groups: ["LSO"] },
        { name: "Hostal Old", groups: ["LSO"] },
        { name: "Hostal New", groups: ["LSO"] },
        { name: "Layanal", groups: ["JSO"] },
        { name: "Bambala..", groups: ["JSO"] },
        { name: "Dilan", groups: ["JSO"] }
    ];

    function init() {
        const body = document.getElementById('rosterBody');
        const today = new Date().toLocaleDateString('si-LK', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
        document.getElementById('date-box').innerText = today;

        dutyPoints.forEach((point, idx) => {
            const savedVal = localStorage.getItem(`duty_point_${idx}`) || "";
            let optionsHTML = `<option value="">-- ‡∂±‡∑í‡∂Ω‡∂∞‡∑è‡∂ª‡∑í‡∂∫‡∑è ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂± --</option>`;

            point.groups.forEach(group => {
                staff[group].forEach(name => {
                    const fullName = `${group} ${name}`;
                    const selected = savedVal === fullName ? "selected" : "";
                    optionsHTML += `<option value="${fullName}" ${selected}>${fullName}</option>`;
                });
            });

            const row = `<tr>
                <td>${idx + 1}</td>
                <td><strong>${point.name}</strong></td>
                <td><select class="officer-select" onchange="save(${idx}, this.value)">${optionsHTML}</select></td>
            </tr>`;
            body.innerHTML += row;
        });
    }

    function save(id, val) { localStorage.setItem(`duty_point_${id}`, val); }

    function resetRoster() {
        if(confirm("‡∑É‡∑í‡∂∫‡∂Ω‡∑î‡∂∏ ‡∂Ø‡∂≠‡∑ä‡∂≠ ‡∂∏‡∂ö‡∑è ‡∂Ö‡∂Ω‡∑î‡∂≠‡∑ä ‡∂Ω‡∑ê‡∂∫‡∑í‡∑É‡∑ä‡∂≠‡∑î‡∑Ä‡∂ö‡∑ä ‡∑É‡∂ö‡∑É‡∂±‡∑ä‡∂±‡∂Ø?")) {
            localStorage.clear();
            location.reload();
        }
    }

    init();
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IronShield Defender Security - Professional</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary: #1a237e; --secondary: #d32f2f; --success: #2e7d32; }
        body { font-family: 'Segoe UI', sans-serif; background: #f4f7f9; margin: 0; padding-bottom: 80px; }
        .header { background: var(--primary); color: white; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.2); }
        
        /* Settings Gear Menu */
        .settings-dropdown { position: relative; }
        .dropdown-content { display: none; position: absolute; right: 0; background-color: white; min-width: 200px; box-shadow: 0 8px 16px rgba(0,0,0,0.2); border-radius: 8px; z-index: 1001; margin-top: 10px; }
        .dropdown-content a { color: #333; padding: 12px 16px; text-decoration: none; display: block; border-bottom: 1px solid #eee; }
        .show { display: block; }

        .container { max-width: 550px; margin: 15px auto; padding: 0 15px; }
        .step-panel { display: none; background: white; border-radius: 12px; padding: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.08); }
        .step-panel.active { display: block; }
        
        .scroll-area { max-height: 65vh; overflow-y: auto; border: 1px solid #eee; border-radius: 8px; padding: 10px; margin-bottom: 20px; }
        .point-card { border: 1.5px solid #dee2e6; border-radius: 10px; padding: 15px; margin-bottom: 15px; background: #fff; }
        .point-title { color: var(--secondary); font-weight: bold; margin-bottom: 10px; font-size: 15px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
        
        select { width: 100%; padding: 12px; border-radius: 8px; border: 1.5px solid #ccc; font-size: 16px; background-color: #f9f9f9; }
        
        .footer-nav { position: fixed; bottom: 0; left: 0; width: 100%; background: white; padding: 15px; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); display: flex; justify-content: center; z-index: 999; }
        .btn { width: 90%; max-width: 500px; padding: 16px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 16px; }
        .btn-next { background: var(--primary); color: white; }
        .btn-wa { background: var(--success); color: white; }

        .switch { position: relative; width: 44px; height: 22px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 22px; }
        input:checked + .slider { background-color: var(--success); }
        .slider:before { position: absolute; content: ""; height: 16px; width: 16px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider:before { transform: translateX(22px); }
        .name-row { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #f1f1f1; }
    </style>
</head>
<body>

<div class="header">
    <div style="font-weight: 800; font-size: 19px;">IRONSHIELD DEFENDER</div>
    <div class="settings-dropdown">
        <i class="fas fa-cog fa-2x" onclick="toggleDropdown()" style="cursor: pointer;"></i>
        <div id="myDropdown" class="dropdown-content">
            <a href="#" onclick="alert('‡∑É‡∑è‡∂∏‡∑è‡∂¢‡∑í‡∂ö ‡∂ö‡∑Ö‡∂∏‡∂±‡∑è‡∂ö‡∂ª‡∂´‡∂∫...')">üë§ ‡∑É‡∑è‡∂∏‡∑è‡∂¢‡∑í‡∂ö‡∂∫‡∑í‡∂±‡∑ä</a>
            <a href="#" onclick="alert('‡∑É‡∑ä‡∂Æ‡∑è‡∂± ‡∂ö‡∑Ö‡∂∏‡∂±‡∑è‡∂ö‡∂ª‡∂´‡∂∫...')">üìç ‡∂ª‡∑è‡∂¢‡∂ö‡∑è‡∂ª‡∑í ‡∑É‡∑ä‡∂Æ‡∑è‡∂±</a>
            <a href="#" onclick="location.reload()" style="color:red;">üîÑ Reset System</a>
        </div>
    </div>
</div>

<div class="container">
    <div id="step1" class="step-panel active">
        <h3 style="color: var(--primary); margin-top: 0;"><i class="fas fa-user-check"></i> ‡∂Ö‡∂Ø ‡∂¥‡∑ê‡∂∏‡∑í‡∂´ ‡∑É‡∑í‡∂ß‡∑í‡∂± ‡∂Ö‡∂∫</h3>
        <div id="att-list" class="scroll-area"></div>
        <div class="footer-nav">
            <button class="btn btn-next" onclick="goToStep(2)">‡∂ª‡∑è‡∂¢‡∂ö‡∑è‡∂ª‡∑í ‡∂∂‡∑ô‡∂Ø‡∑è‡∂Ø‡∑ì‡∂∏‡∂ß (Next) ‚ûî</button>
        </div>
    </div>

    <div id="step2" class="step-panel">
        <h3 style="color: var(--primary); margin-top: 0;"><i class="fas fa-map-marker-alt"></i> ‡∂ª‡∑è‡∂¢‡∂ö‡∑è‡∂ª‡∑í ‡∑É‡∑ä‡∂Æ‡∑è‡∂± (1-42)</h3>
        <div id="point-list" class="scroll-area"></div>
        <div class="footer-nav" style="flex-direction: column; gap: 10px; height: auto;">
            <button class="btn btn-wa" onclick="sendWA()"><i class="fab fa-whatsapp"></i> WhatsApp ‡∂∫‡∑Ä‡∂±‡∑ä‡∂±</button>
            <button class="btn" style="background:#eee; color:#333;" onclick="goToStep(1)">‡∂Ü‡∂¥‡∑É‡∑î</button>
        </div>
    </div>
</div>

<script>
    const members = [
        "OIC Asanka", "OIC Kumara", "OIC Suranjith", "OIC Samaranayake", "OIC Dayarathne",
        "OIC Suresh", "OIC Mendis", "OIC Vijithalal", "OIC Rangana", "OIC Sampath",
        "SSO Tharaka", "SSO Jayalath", "SSO Viresh", "SSO Ravi", "SSO Ajith",
        "SSO Manusha", "SSO Rathnadasa", "JSO Prasanna", "JSO Pradeep", "JSO Chandana",
        "JSO Wijerathne", "JSO Raj", "JSO Dinesh", "JSO Ravindu", "JSO Lokubanda",
        "JSO Sunil", "LOIC Rita", "LSO Nandani", "LSO Seelawathi", "LSO Nalani",
        "LSO Wimalasooriya", "LSO Shanthi", "LSO Nandawathi", "LSO Dilani", "LSO Sriyalatha"
    ];

    const pointNames = [
        "1. Guard Room - Post 01", "2. Guard Room - Post 02", "3. M/E Entry - 01", "4. M/E Entry - 02", "5. Time Office",
        "6. B/C/P - Post 01", "7. B/C/P - Post 02", "8. Glass Door", "9. Lobby - Post 01", "10. Lobby - Post 02",
        "11. C/P/R", "12. Doctors' Lift", "13. Pharmacy - Main", "14. Pharmacy - OPD", "15. Pharmacy - Hospital",
        "16. CCTV New - 01", "17. CCTV New - 02", "18. C/P/03", "19. C/P/04", "20. Commercial Hostel",
        "21. Rounds - 01", "22. Rounds - 02", "23. Kitchen Stores", "24. Kitchen", "25. Main Gate",
        "26. 2nd Basement", "27. SICU", "28. MICU", "29. CCTV Old - 01", "30. CCTV Old - 02",
        "31. Lift Lobby - 3F", "32. Lift Lobby - 4F", "33. Lift Lobby - 5F", "34. Lift Lobby - 6F", "35. Fort City",
        "36. Lady Hostel - New", "37. Hostel - Old", "38. Hostel - New", "39. Layanal Area", "40. Bambalapitiya Area",
        "41. Dilan Area", "42. Receiving"
    ];

    function toggleDropdown() { document.getElementById("myDropdown").classList.toggle("show"); }
    window.onclick = function(e) { if (!e.target.matches('.fa-cog')) { document.getElementById("myDropdown").classList.remove('show'); } }

    function init() {
        const attDiv = document.getElementById('att-list');
        attDiv.innerHTML = members.map(m => `
            <div class="name-row">
                <span>${m}</span>
                <label class="switch">
                    <input type="checkbox" checked class="att-check" data-name="${m}">
                    <span class="slider"></span>
                </label>
            </div>`).join('');
    }

    function goToStep(n) {
        document.querySelectorAll('.step-panel').forEach(p => p.classList.remove('active'));
        document.getElementById('step' + n).classList.add('active');
        if(n === 2) renderPoints();
        window.scrollTo(0,0);
    }

    function renderPoints() {
        const present = Array.from(document.querySelectorAll('.att-check:checked')).map(c => c.dataset.name);
        const pList = document.getElementById('point-list');
        pList.innerHTML = pointNames.map(p => `
            <div class="point-card">
                <div class="point-title">${p}</div>
                <select class="duty-sel" data-point="${p}">
                    <option value="">-- ‡∂±‡∑í‡∂Ω‡∂∞‡∑è‡∂ª‡∑í‡∂∫‡∑è ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂± --</option>
                    ${present.map(m => `<option value="${m}">${m}</option>`).join('')}
                </select>
            </div>`).join('');
    }

    function sendWA() {
        let msg = "*IRONSHIELD DEFENDER - DUTY ROSTER*\n\n";
        document.querySelectorAll('.duty-sel').forEach(s => {
            if(s.value) msg += `üìç *${s.dataset.point}* : ${s.value}\n`;
        });
        window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`);
    }

    init();
</script>
</body>
</html>
